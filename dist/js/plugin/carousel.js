define(["jquery"],function(){$.fn.carousel=function(a){function b(){c="right"===t?window.setInterval("$.rightChangeImg();",m):"left"===t?window.setInterval("$.leftChangeImg();",m):window.setInterval("$.leftChangeImg();",m)}for(var c,d,e=Math.abs,f=a.carousel,g=a.indexContainer,h=$(f).children("li"),j=h.length,k=a.prev,l=a.next,m=a.timing,n=a.animateTime,o=a.autoPlay,p=1,q="js_index",r=!0,s=h.width()*(h.length+2),t=a.direction,u=1;u<=h.length;u++)$(g).append("<li></li>");$(f).width(s).append($(h[0]).clone()).prepend($(h[h.length-1]).clone()).css("left","-"+h.width()+"px"),h=$(f).children("li"),d=$(g).children("li"),$(d[p-1]).addClass(q),o&&(b(),$(f+","+k+","+l+","+g).hover(function(){window.clearInterval(c)},function(){b()}));$.extend({changeIndex:function(a){$(d).removeClass(q),$(d[a]).addClass(q)}}),$.extend({leftChangeImg:function(){r=!1,p==j&&(p=0,$(f).stop(!0,!0).css("left","0px")),p++,$(f).stop(!0,!0).animate({left:"-="+h.width()+"px"},n),setTimeout(function(){p==j&&(p=0,$(f).stop(!0,!0).css("left","0px")),r=!0},n),$.changeIndex(p-1)}}),$.extend({rightChangeImg:function(){r=!1,0==p&&(p=j,$(f).stop(!0,!0).css("left","-"+void 0+"px")),p--;var a=s-2*h.width();$(f).stop(!0,!0).animate({left:"+="+h.width()+"px"},n),setTimeout(function(){0==p&&(p=j,$(f).stop(!0,!0).css("left","-"+a+"px")),r=!0},n),0==p?$.changeIndex(j-1):$.changeIndex(p-1)}}),$(l).on("click",function(){var a=e(parseInt($(f).css("left"))),b=s-2*h.width();r&&(a==b&&(p=0,$(f).stop(!0,!0).css("left","0px")),$.leftChangeImg())}),$(k).on("click",function(){var a=e(parseInt($(f).css("left"))),b=s-2*h.width();r&&(0==a&&(p=j,$(f).stop(!0,!0).css("left","-"+b+"px")),$.rightChangeImg())}),d.on("click mouseover",function(){var a=$(this).index()+1;if(r)if(a>p){$.changeIndex(a-1),r=!1;var b=(a-p)*h.width();p=a,$(f).stop(!0,!0).animate({left:"-="+b+"px"},n),setTimeout(function(){r=!0},n)}else if(a<p){$.changeIndex(a-1),r=!1;var b=(p-a)*h.width();p=a,$(f).stop(!0,!0).animate({left:"+="+b+"px"},n),setTimeout(function(){r=!0},n)}})}});