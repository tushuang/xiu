define(["jquery","cookie","optimize","template"],function(a,b,c,d){return{onload:function(c){cookieObj=JSON.parse(b.getCookie("goods")),cookieObj&&a(".cart-wrap").load("http://localhost:9000/pages/templates/common.html",function(){function e(){var c=JSON.parse(b.getCookie("goods")),d=0;c.forEach(function(a){d+=parseInt(a.count)}),a(".leftLi a em").html(d)}var f=d("shoppingCart",{list:cookieObj});a(".cart-wrap").html(a(".cart-wrap").html()+f),e(),a(".cartDelete").on("click",function(){a(this.parentNode).css("display","none");var c=this.parentNode.className,d=JSON.parse(b.getCookie("goods"));d.forEach(function(a,b){a.id==c&&d.splice(b,b+1)}),b.setCookie("goods",JSON.stringify(d),75e4,"/"),e()}),c?c():""})},input:function(){a("#input-text").on("input",c.throttle(function(){var b=this.get(0).value;a.ajax({type:"get",url:"http://localhost:9000/proxy/search.xiu.com/ajax/autocomplete.htm?jsoncallback=jQuery17207773954956291034_1536757373699&q="+b+"&limit=10&timestamp=1536757377890&mkt=xiu&_=1536757377890",success:function(b){var c=/^\w*\(/;if(b=b.replace(c,"").replace(/\)$/,""),b=JSON.parse(b),a(".droplist").css({display:"block"}),a(".droplist").html(""),null!=b)for(var d,e=0;e<b.length;e++)d=a("<li></li>"),a(d).html(b[e].display),a(d).appendTo(a(".droplist"))}})},100,a("#input-text"))),a("body,document").on("click",function(){a(".droplist").css({display:"none"})}),a(window).on("scroll",function(){a(".droplist").css({display:"none"})}),a(".droplist").on("click","li",function(){console.log(a(this)),a("#input-text").get(0).value=a(this).html(),a(".droplist").css({display:"none"})})}}});