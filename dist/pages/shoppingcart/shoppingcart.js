require(["../../js/conf/config.js"],function(){require(["jquery","optimize","template","ajaxMapping","cookie"],function(a,b,c,d,e){console.log("\u6A21\u5757\u88AB\u52A0\u8F7D\u4E86"),a(function(){var b=JSON.parse(e.getCookie("goods"));console.log(b,b.length),null!=b&&0!=b.length?(a(".empty-cart").css({display:"none"}),a(".content").css({display:"block"})):(a(".empty-cart").css({display:"block"}),a(".content").css({display:"none"})),a(".content").load("http://localhost:9000/pages/templates/shoppingcart.html",function(){function b(){var b=0,c=!0,d=0,e=0,f=0,g=0,h=0;return a.each(a(".select"),function(j,i){!0==i.checked&&"table-row"==getComputedStyle(i.parentNode.parentNode).display?(d=parseInt(i.parentNode.parentNode.children[3].children[1].value),e=i.parentNode.parentNode.children[2].children[1].innerHTML,e=parseInt(e.substring(1,e.length)),g=i.parentNode.parentNode.children[2].children[0].innerHTML,g=parseInt(g.substring(1,g.length)),f+=d,b+=e*d,h+=(g-e)*d):c=!1,allPrice=b,a(".all-price").html("\uFFE5"+allPrice),a("b.num").html(f),a(".preferential").html(h),a(".preferential-price").html(allPrice+h),console.log(b)}),c}function d(){a.each(a(".select"),function(a,b){!0==b.checked?b.parentNode.parentNode.style.background="#fff4e8":!1==b.checked&&(b.parentNode.parentNode.style.background="white")})}var f=JSON.parse(e.getCookie("goods"));if(f){var g=c("cart",{list:f});a(".content").html(a(".content").html()+g)}a("table").on("click","span",function(){if("plus"==this.className){var a=parseInt(this.previousElementSibling.value);this.previousElementSibling.value=++a}if("minus"==this.className){console.log(this.nextElementSibling.value);var a=parseInt(this.nextElementSibling.value);1<a&&(a=--a),this.nextElementSibling.value=a}b()}),b(),d(),a(".select").on("click",function(){a(".selectAll").get(0).checked=!!b(),b(),d()}),a(".selectAll").on("click",function(){!0==a(".selectAll").get(0).checked&&a.each(a(".select"),function(a,b){b.checked=!0}),d()}),a(".delete-goods").on("click",function(){this.parentNode.parentNode.style.display="none";var a=this.parentNode.parentNode.id,c=JSON.parse(e.getCookie("goods"));c.forEach(function(b,d){b.id==a&&c.splice(d,d+1)}),e.setCookie("goods",JSON.stringify(c),75e3,"/"),b(),location.reload()}),a(".deleteAll").on("click",function(){!0==a(".deleteAll").get(0).checked&&a.each(a(".select"),function(a,b){b.checked=!0}),d(),location.reload()}),a(".deleteAllBtn").on("click",function(){!0==a(".deleteAll").get(0).checked&&a(".goods").css({display:"none"})})}),a(".collection-wrap").load("http://localhost:9000/pages/templates/shoppingcart.html",function(){var b=JSON.parse(e.getCookie("collection"));if(b){var d=c("collection",{list:b});a(".collection-wrap").html(a(".collection-wrap").html()+d);var f=!0;a(".collect-btn").on("click",function(){f?(a(".collection-wrap").css("display","none"),a(".collect-btn").html("+"),f=!1):(a(".collection-wrap").css("display","block"),a(".collect-btn").html("-"),f=!0)})}})})})});